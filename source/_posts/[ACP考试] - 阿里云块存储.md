---
title: "[ACP考试] - 阿里云块存储"
catalog: true
date: 2020-09-14 12:20:24
subtitle: ""
header-img: "/img/default.png"
tags:
- 阿里云
catagories:
---
#### 阿里云块存储产品

##### 块存储的概念

块存储是阿里云为ECS提供的块设备产品，具有高性能和低延迟的特点，支持随机读写。可以像使用物理硬盘一样格式化并监理文件系统来使用块存储，可满足大部分业务场景下的存储需求。类型包括：

+ 云盘：阿里云为云服务ECS提供数据块级别的块存储产品。云盘采用多副本的分布式机制，具有低延时、高性能、持久性、高可靠等性能，支持随时创建、扩容以及释放。
+ 共享块存储：一种支持多个ECS实例并发读写访问的数据块级存储设备。类似云盘，适用于完全共享型架构下对块存储设备的共享访问场景。
+ 本地盘：基于ECS所在物理机上的本地硬盘设备，对存储I/O性能和海量存储性价比有极高要求的业务场景而设计的产品。具有低延迟、高随机IOPS、高吞吐量、高性价比的优势。

##### 性能指标 - IOPS

IOPS至每秒能处理的I/O个数，表示块存储处理读写的能力，单位为次。指标类型有：
+ 总IOPS
+ 随机读IOPS
+ 随机写IOPS
+ 顺序读IOPS
+ 顺序写IOPS

##### 性能指标 - 吞吐量、访问延迟

+ 吞吐量：吞吐量指单位时间内可以成功传输的数据量，单位为MBps。大数据场景需要关注吞吐量。
+ 访问延迟：访问延迟是指存储处理一个I/O需要处理的时间，单位为s、ms。过高的延迟会导致应用性能下降甚至报错。如果应用对高延迟比较敏感，建议使用ESSD云盘、SSD云盘、SSD共享存储或本地SSD盘类产品。

##### 阿里云块存储特点

+ 多样性
+ 高效性
+ 安全性

##### 三副本技术

阿里云分布式文件系统为ECS提供稳定、高效、可靠地数据随机访问能力。对云盘的读写最终都会被映射为对阿里云数据存储平台上的文件的读写。阿里云提供一个扁平的线性存储空间，在内部会对线性地址进行切片，一个分片称为一个Chunk。对每一个chunk，阿里云会复制出三个副本，并且这些副本按照一定的策略存放在集群的不同节点上，保证数据的可靠性。

##### ECS块存储加密

使用ECS云盘加密功能，系统会将ECS实例传输到云盘的数据自动加密，并在读取数据时自动解密。加密解密在ECS实力所在的宿主机上进行，对ECS实例传输到云盘进行加密，在加密解密过程中，性能几乎没有衰减。

##### 云盘类型

+ ESSD云盘：最新的超高性能云盘产品。
+ SSD云盘：稳定的高随机读写性能、高可靠性的高性能云盘产品。
+ 高效云盘：性价比高的、中等随机读写能力高可靠的云盘产品。
+ 普通云盘：具备高可靠，一般读写新能的产品。

##### 云共享块存储和本地存储的分类

+ 共享快存储：为防止一个或多个计算节点发生故障而导致业务中断，可以使用共享快存储保证集群对外提供业务访问的持续性和高可用性。
+ 本地盘：适合对存储I/O性能、海量存储性价比有极高要求的业务场景。如直播，游戏，大数据等等。

#### 块存储的使用

##### 如何使用

创建云盘 -> 挂载云盘 -> 分区格式化数据盘

+ 创建云盘：可创建按量付费云盘，预付费云盘。创建云盘时可以使用快照。
+ 挂载云盘：在实例管理页面挂载云盘或在云盘管理页面挂载云盘。
+ 分区格式化数据盘：Windows或Linux格式化数据盘，分区大于2TiB数据盘。

##### 块存储的扩容

+ 扩展已有云盘，你需要自行扩展已有分区或者扩展新建分区。
+ 创建一块新云盘，作为数据盘挂载到实例上，并需要自行分区格式化。
+ 更换系统盘的同时制定更高的系统盘容量。

系统盘扩容上限，新值必须大于系统盘现在容量，小于等于`500G`。

##### 块存储使用限制

+ 随实例一起创建的云盘和单独为预付费实例创建的数据盘不需要挂载操作。
+ 只能挂载用作数据盘的云盘，不需要挂载系统盘的云盘。
+ 挂载云盘时，实例必须满足：实力状态必须为Running或Stopped，不能为Locked。并且实例不欠费。
+ 挂载云盘时，云盘状态必须为Available。
+ 云盘只能挂载在同一地域下同一可用区的实例上，能蹦跨可用区。
+ 一台ECS实例最多挂载16块云盘，同一时刻，一块云盘只能挂载在一台实例上。
+ 通过ECS管理控制台上的云盘页面独立创建的云盘只能挂载到同一地域下同一可用区的实例上。

##### 快照的概念

快照是某一时间点某一块云盘的数据状态文件。常用于数据备份、数据恢复和制作自定义镜像等。使用场景：

+ 容灾备份
+ 版本回退
+ 环境复制
+ 数据开发
+ 提供操作容错率

##### 快照的分类

+ 创建方式上：
    + 手动快照：可利用控制台随时创建快照
    + 自动快照：定期任务
+ 从创建顺序上：
    + 全量快照：云盘首次创建的快照是快照全量
    + 增量快照：云盘后续创建的快照均是增量快照

##### 服务优势

+ 快照额度：每个云盘均拥有256个手动快照额度和256个自动快照。
+ 自动快照策略：支持自定义快照时间点、每周重复日期、快照保留时长，可查询自动快照策略关联的云盘等等。

##### 手动创建快照

登录控制台 -> 点击实例与镜像 > 镜像 -> 选择相应的地域 -> 点击实例的管理按钮 -> 点击本实例磁盘，选择创建快照

##### 手动创建快照的注意事项

+ 创建快照涉及资源计费。
+ 创建快照可能会轻微降低云盘的性能，I/O短暂变慢。应避开业务高峰期。
+ 快照只会备份某一时刻的数据，期间的数据不会被保存。
+ 为保证成功创建快照，创建快照时，不能修改ECS实例状态，比如停止或重启实例。
+ 自行创建快照会议只保留，请定期删除不需要的快照，避免快照容量持续扣费。
+ 如果使用多分区的单云盘制作扩展券，创建的快照可以正常回滚云盘。
+ 使用多云盘制作了动态拓展卷后，拓展卷中无I/O操作时，创建的快照可以正常回滚云盘。

##### 创建自动快照策略

登录ECS管理控制台 -> 选择存储与快照 > 快照 -> 选择地域 -> 选择自动快照策略 -> 单击右上角的创建策略 -> 完成指定规则的策略名称



