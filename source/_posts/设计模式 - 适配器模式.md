---
title: "设计模式 - 适配器模式"
catalog: true
date: 2020-08-29 13:20:24
subtitle: "Adapter"
header-img: "/img/default.png"
tags:
- 设计模式
catagories:
---

### 什么是适配器模式？
适配器模式（Adapter Pattern）是作为两个不兼容的接口之间的桥梁。这种类型的设计模式属于结构型模式，它结合了两个独立接口的功能。

这种模式涉及到一个单一的类，该类负责加入独立的或不兼容的接口功能。举个真实的例子，读卡器是作为内存卡和笔记本之间的适配器。您将内存卡插入读卡器，再将读卡器插入笔记本，这样就可以通过笔记本来读取内存卡。

### 优缺点
+ 优点：
1. 可以让任何两个没有关联的类一起运行。 
2. 提高了类的复用。 
3. 增加了类的透明度。 
4. 灵活性好。
+ 缺点：
1. 过多地使用适配器，会让系统非常零乱，不易整体进行把握。比如，明明看到调用的是 A 接口，其实内部被适配成了 B 接口的实现，一个系统如果太多出现这种情况，无异于一场灾难。因此如果不是很有必要，可以不使用适配器，而是直接对系统进行重构。 
2. 由于 JAVA 至多继承一个类，所以至多只能适配一个适配者类，而且目标类必须是抽象类。

### 注意事项
适配器不是在详细设计时添加的，而是**解决正在服役的项目**的问题。

### Java代码实现
```java
public class Main {
    public static void main(String[] args) {
        // region China
        VoltageAdaptor adaptorChina = new VoltageAdaptor("China");
        System.out.println("Voltage in China is " + adaptorChina.getDefaultValue());

        // region America
        VoltageAdaptor adaptorAmerica = new VoltageAdaptor("America");
        System.out.println("Voltage in America is " + adaptorAmerica.getDefaultValue());
    }
}

interface Voltage {
    int getDefaultValue();
}

class ChineseVoltage implements Voltage {
    @Override
    public int getDefaultValue() {
        return 220;
    }
}

class AmericaVoltage implements Voltage {
    @Override
    public int getDefaultValue() {
        return 110;
    }
}

class VoltageAdaptor implements Voltage {
    private Voltage voltage;

    public VoltageAdaptor(String region) {
        if ("China".equalsIgnoreCase(region)) {
            this.voltage = new ChineseVoltage();
        } else if ("America".equalsIgnoreCase(region)) {
            this.voltage =  new AmericaVoltage();
        } else {
            throw new RuntimeException("please input a valid region.");
        }
    }

    @Override
    public int getDefaultValue() {
        return voltage.getDefaultValue();
    }
}
```

输出结果
```
Voltage in China is 220
Voltage in America is 110
```

不禁回想起以前项目中都有应用到适配器模式，比如对于不同日志可以有不同的处理器来处理，再比如不同的指标可以有不同的验证标准，完全可以用适配器模式来实现。代码实现的时候大致能够想到这样去写，但是今天认真学习之后认识更加深刻了，还是需要多多学习才行呀。