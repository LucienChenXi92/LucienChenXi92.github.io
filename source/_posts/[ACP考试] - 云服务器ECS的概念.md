---
title: "[ACP考试] - 云服务器ECS的概念"
catalog: true
date: 2020-09-10 12:20:24
subtitle: ""
header-img: "/img/default.png"
tags:
- 阿里云
catagories:
---

#### 阿里云云服务器ECS

##### 服务器的部署模式

+ 单机架构： 一台服务器提供给客户提供所有应用。硬件资源有上限。
+ 集群架构： 多台服务器提供应用。不易扩展，而且容易形成资源浪费。
+ 云计算架构： 弹性、扩展。易扩展，即开即用，方便管理。

##### ECS的优势

+ 无需自建机房，无需采购硬件配置。
+ 分钟级交付，快速部署，缩短上线周期。
+ 快速接入全球范围内的数据中心和BGP机房。
+ 成本透明，按需使用。
+ 支持多种类型计算服务器。
+ 支持内网访问其他云服务器，形成丰富的行业解决方案，降低公网流量成本。
+ 提供防火墙，角色权限控制，内网隔离，防病毒攻击等安全方案。
+ 提供监控和运维体系。
+ 提供行业标准API，提高易用性和适用性。

##### 云服务器的灵魂：虚拟化技术

虚拟化前：IT资源独立，硬件资源易浪费。  
虚拟化后：IT资源抽象为共享资源池，从资源池中灵活分配资源。

##### 云服务器ECS的概念

云服务器(Elastic Compute Service，简称ECS)是阿里云挺高的性能卓越、稳定可靠、弹性拓展的IaaS(Infrastructure as a Service)级别云计算服务。云服务器ECS免去了采购IT硬件的前期准备，像使用水、电、天然气等公共资源一样便捷、高效地使用服务器，实现云计算资源的即开即用和弹性伸缩。阿里云ECS持续提供创新性服务器，解决多种业务需求，助力业务发展。

##### ECS的组件

|组件|说明|
| -- | -- |
|实例|一台虚拟服务器，内含CPU、内存、操作系统、网络配置、磁盘等基础的计算组件。实例的计算性能、内存性能、和适用业务场景由实力规格决定，其具体性能指标包括实例CPU核数、内存大小、网络性能等。|
|镜像|提供实例的操作系统、初始化应用数据及预装的软件。|
|存储块|块设备类型产品，具备高性能和低延迟的特性。提供基于分布式存储架构的云盘、共享块存储以及基于物理机本地存储的本地盘。|
|快照|某一时间点云盘或共享块存储的数据状态文件。常用于数据备份、数据恢复和制作自定义镜像等。|
|安全组|同一地域内具有相同保护需求并相互信任的实例组成，是一种虚拟的防火墙，用于设置实例的网络访问控制。|
|网络|专有网络：逻辑上彻底隔离的云上私有网络。可以自行分配私网IP地址范围、配置路由表和网关等。经典网络：所有经典网络类型实例都建立在一个公用的基础网络上。|


#### ECS实例

##### 选购云服务器

+ 个人用户: 个人用户只需要完成云服务器的购买即可。
+ 企业用户: 企业用户需要完成规划后再进行购买。

##### 实例规格

+ 企业级x86计算规格族群
+ 企业级异构计算规格族群
+ 弹性裸金属服务器(神龙)超级计算集群(SCC)实例规格族群
+ 入门级x86计算规格族群

> **弹性裸金属服务器**
> + 弹性裸金属服务器融合了物理机和云服务器各自的优势，即提供超高的计算性能，又提供了阿里云特有的硬盘，网络，安全，监控等服务。
> + 弹性裸金属服务器本质是单台物理机，不会和其他人共享。

##### ECS实例的生命周期

|控制台状态|API状态|状态属性|
|--|--|--|
|准备中|Pending|中间|
|启动中|Starting|中间|
|运行中|Running|稳定|
|即将过期|Running|稳定|
|停止中|Stopping|中间|
|已停止|Stopped|稳定|
|已过期|Stopped|稳定|
|过期回收中|Stopped|稳定|
|欠费回收中|Stopped|稳定|
|已锁定|Stopped|稳定|
|等待释放中锁定|Stopped|稳定|

> 即将过期是距离过期日期提前15天的状态。
> 过期回收中（vCPU + 内存）不再保留，本地盘数据不再保留，云盘和分配的公网IP会保留。
> 欠费回收中 同过期回收中。

##### 镜像的概念

镜像是云服务器实例运行环境的模板，包括操作系统和运行时环境，也可能包括预装的应用程序。
+ 公共镜像
+ 自定义镜像
+ 云市场镜像

##### 阿里云网络VPC概念

阿里云推荐使用专有网络VPC(Virtual Private Cloud)，专有网络之间逻辑上彻底隔离，VPC作为用户上云首选的产品，主要特点：
+ 隔离的网络环境
+ 可控的网络配置

##### 网络规划

基于容灾的考虑，建议将不同的弹性裸金属服务器放在不同可用区下。

##### 安全组的作用

+ 安全组是一种虚拟防火墙，用来控制出站和入站流量。
+ 在同一个VPC内，位于相同安全组的实例内网互通。
+ 默认规则： 
    + 入方向：默认拒绝所有访问。为了方便管理云服务器，默认安全组包含了ICMP协议、SSH 22端口、RDP 3389端口，还可以勾选80和443端口。
    + 出方向：允许所有访问。

##### VPC安全组默认规则

+ 入方向： 开放端口有 22, 3389, -1, 80, 443。授权对象： 0.0.0.0/0
+ 出方向： 允许所有访问

#### ECS的优势

与普通的IDC(Intergrated Data Center)机房相比，高可用，安全性，弹性等优势。
+ 机房部署
+ 操作易用
+ 容灾备份
+ 安全可靠
+ 灵活拓展
+ 节约成本

#### ECS的使用

##### 购买ECS流程

打开创建实例页面 -> 完成基础配置 -> 配置网络和安全组 -> 系统配置(可选) -> 分组设置(可选) -> 确认订单和购买

##### 配置自定义安全组规则

登录控制台 -> 选择网络和安全组 > 安全组 -> 选择地域 -> 点击配置规则 -> 点击添加安全组规则 -> 设置具体规则内容

> 优先级： 1 - 100, 数值越小，优先级越高。相同优先级时拒绝请求优先级更高。

##### ECS管理方式

+ 控制台： 最常用方法。
+ API：熟悉网络服务协议和一种以上编程语言，使用云服务器ECS API管理云上资源和开发自己的应用程序。

##### SDK的编程语言

+ 支持的编程语言有Java，Python，PHP， .NET，C/C++，GO
+ SDK操作流程：创建Profile，创建Client，创建Request，设置Request参数，使用Client对应方法传入Request并获得Response，解析Response。

##### ECS的登录

+ 控制台登录，先登录云控制台，然后再通过控制台中的远程终端
+ 直接登录，通过远程SSH工具登录

#### ECS的计费和使用限制

##### ECS计费资源

| 资源 |费用|
|--|--|
|实例规格|vCPU核数和内存容量|
|镜像|公用镜像、自定义镜像、共享镜像、镜像市场|
|云盘|随实例一起创建、计费方式与实例相同|
|公网带宽||
|快照|只要开通快照服务并生成快照就要收费|

##### ECS计费模式

+ 包年包月：预付费、最少一个月、适合7 * 24固定服务
+ 按量付费：后付费、按秒计费单价按`元/小时`显示，不开启不收费
+ 抢占实例：后付费、竞价模式若出价 > 市场价成交；若出价 < 市场价，实例被释放。

##### ECS使用限制

+ 不支持虚拟化软件的安装和在进行虚拟化(例如安装使用VMware Workstation)。目前，仅弹性裸金属服务器和超级计算集群支持再虚拟化。
+ 不支持声卡应用。
+ 不支持直接加载外界硬件设备。
+ 不支持SNAT等IP包地址转换服务，可以使用自己搭建VPN或代理方式实现。
+ 不支持多播协议。
+ 日志服务不支持32位Linux云服务器。

|限制项|普通用户限制|例外申请方式|
|--|--|--|
|创建ECS实例用户限制|实名认证|没有例外|
|创建按量付费资源限制|账户余额不可小于100|提交工单|
|可创建按量付费实例规格|vCPU核数小于16|提交工单|
|一个账户在每个地域的按量付费总vCPU配额|50 vCPU|提交工单|
|一个账户在每个地域的抢占式实例vCPU配额|50 vCPU|提交工单|
|一个账号在每个地域实例启动模板数量|30|没有例外|
|一个实例启动模板中的版本数量|30|没有例外|
|按量付费转预付费|以下规格不支持：t1、s1、s2、s3、c1、c2、m1、m2、n1、n2、e3|没有例外|
|预付费转按量付费|是否支持要基于使用情况而定，退款有上限要求|没有例外|

##### ECS的使用场景

+ 企业官网或轻量级的Web应用
+ 多媒体以及高并发应用或网站
+ 高I/O要求数据库
+ 访问量波动剧烈的应用或网站
+ 大数据及实时在线或离线分析
+ 机器学习和深度学习等AI应用











